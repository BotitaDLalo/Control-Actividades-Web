@{
    Layout = "~/Views/Shared/_LayoutDocente.cshtml";
    ViewBag.Title = "MateriasDetalles";
    @Html.Partial("~/Views/Docente/CrearActividadModal.cshtml")
    @Html.Partial("~/Views/Docente/crearAvisoMateriaModal.cshtml")

    int docenteId = ViewBag.DocenteId != null ? (int)ViewBag.DocenteId : 0;

    int materiaId = ViewBag.MateriaId != null ? (int)ViewBag.MateriaId : 0;

    int grupoId = ViewBag.GrupoId != null ? (int)ViewBag.GrupoId : 0;
}
<div id="docente-datos" data-docenteid="@docenteId"></div>
<div class="materia-container">
    <div class="materia-header" id="materiaHeader" style="background-color: #d63384;">
        <h1><span id="materiaNombre">Cargando...</span></h1>
        <div class="materia-info">
            <span>Código de clase: <strong id="codigoAcceso">Cargando...</strong></span>
            <i class="fas fa-copy copiar-icono" onclick="copiarCodigoAcceso()" title="Copiar código"></i>
        </div>
    </div>

    <nav class="materia-nav">
        <button class="tab-button active" onclick="cambiarSeccion('avisos')">Avisos</button>
        <button class="tab-button" onclick="cambiarSeccion('actividades')">Actividades</button>
        <button class="tab-button" onclick="cambiarSeccion('alumnos')">Alumnos</button>
        <button class="tab-button" onclick="cambiarSeccion('calificaciones')">Calificaciones</button>
    </nav>

    <div id="contenedor-dinamico" class="materia-content">
        <div id="seccion-avisos" class="seccion">
            <div class="dropdown">
                <button class="btn-crear">Crear ▼</button>
                <div class="dropdown-content">
                    <button class="misCursos-dropdown-item" data-bs-toggle="modal" data-bs-target="#crearAvisoMateriaModal">
                        Crear Aviso
                    </button>
                </div>
            </div>
            <div class="divider"></div>
            <div id="listaDeAvisosDeMateria"></div>
        </div>

        <div id="seccion-actividades" class="seccion" style="display: none;">
            <div class="dropdown">
                <button class="btn-crear">Crear ▼</button>
                <div class="dropdown-content">
                    <button class="misCursos-dropdown-item" data-bs-toggle="modal" data-bs-target="#crearActividadModal">
                        📋Crear Tarea
                    </button>
                </div>
            </div>
            <div class="divider"></div>
            <div id="listaActividadesDeMateria"></div>
        </div>

        <div id="seccion-alumnos" class="seccion" style="display: none;">
            <div class="container mt-3">
                <label for="buscarAlumno" class="form-label">Buscar alumno por correo:</label>
                <div class="input-group">
                    <input type="text" id="buscarAlumno" class="form-control" placeholder="Ingrese el correo del alumno..." autocomplete="off">
                    <button id="btnAsignarAlumno" class="btn btn-primary">Asignar Alumno</button>
                    
                    @if (User != null && User.IsInRole("Docente"))
                    {
                        <button id="btnImportarAlumnos" class="btn btn-secondary ms-2">Importar Alumnos</button>
                        <input type="file" id="fileImportarAlumnos" accept=".xlsx,.xls" style="display:none" />
                    }
                </div>
                <ul id="sugerenciasAlumnos" class="list-group mt-2"></ul>
            </div>
            <div id="listaAlumnosAsignados" class="mt-3"></div>
        </div>

        <div id="seccion-calificaciones" class="seccion" style="display: none;">
            <h2>Calificaciones</h2>
            <p>Notas de los estudiantes...</p>
        </div>
    </div>
</div>

@section Scripts {
    <script>
    
        let grupoIdGlobal = '@grupoId';
    </script>
    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/docente")
    @Scripts.Render("~/bundles/docentegrupos")
    <script src="~/Scripts/Docente/Grupos/scriptsActividades.js"></script>
}

@section Styles{
    @Styles.Render("~/Content/Docente/css")
}