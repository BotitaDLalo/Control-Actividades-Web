@Html.AntiForgeryToken()
@model List<ControlActividades.Models.DocentesValidacion>
@{
    ViewBag.Title = "Administrador";
    Layout = "~/Views/Shared/_LayoutAdministrador.cshtml";
}

<h2>Validación registro docentes</h2>
<!-- Modal -->
<div class="modal fade" id="modalValidacion" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel" style="font-size:24px">Validar Docente</h5>
                <button type="button" class="btn-close btn-cerrar-administrar" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="text-align: left;">
                <p><strong>Apellido Paterno: </strong><span id="modalApellidoPaterno"></span></p>
                <p><strong>Apellido Materno: </strong><span id="modalApellidoMaterno"></span></p>
                <p><strong>Nombres: </strong><span id="modalNombres"></span></p>
                <p><strong>Email: </strong><span id="modalEmail"></span></p>
                <p><strong>Estatus: </strong><span id="modalEstatus"></span></p>
            </div>
            <div class="modal-footer modalValidacion-footer-pendiente" style="display:none">
                <button type="button" class="btn btn-danger" id="abrirDenegacionModal" data-docenteid="">
                    Denegar
                </button>
                <button type="button" class="btn btn-success" id="abrirConfirmacionModal" data-docenteid="">
                    Autorizar
                </button>
            </div>

            <div class="modal-footer modalValidacion-footer-autorizado" style="display:none">

                <button type="button" class="btn btn-success" id="abrirReenviarModal" data-docenteid="">
                    Reenviar
                </button>

            </div>

            <div class="modal-footer modalValidacion-footer-denegado" style="display:none">
                @* <button type="button" class="btn btn-outline-primary">Revalidar</button> *@
            </div>
        </div>
    </div>
</div>


<!-- Modal de Confirmación -->
<div class="modal fade" id="confirmacionModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="confirmModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <i class="bi bi-check-circle text-success fs-1"></i>
            <div class="modal-body" style="font-size:22px">
                ¿Desea enviar el código?
            </div>
            <input type="hidden" id="docenteId" />
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-success" id="confirmarAutorizarBtn" data-confirmar-autorizacionbtn-docenteid="">Enviar</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal de negacion -->
<div class="modal fade" id="denegacionModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="confirmModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <i class="bi bi-x-circle text-danger fs-1"></i>
            <div class="modal-body" style="font-size:22px">
                ¿Quiere denegar al docente?
            </div>
            <input type="hidden" id="docenteId" />
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-danger" id="confirmarDenegarBtn" data-denegar-autorizacionbtn-docenteid="">Denegar</button>
            </div>
        </div>
    </div>
</div>

<!--Modal reenviar -->
<div class="modal fade" id="reenviarModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="confirmModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <i class="bi bi-check-circle text-success fs-1"></i>
            <div class="modal-body" style="font-size:22px">
                ¿Desea reenviar código?
            </div>
            <input type="hidden" id="docenteId" />
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-success" id="confirmarReenviarBtn" data-confirmar-reenviarbtn-docenteid="">Reenviar</button>
            </div>
        </div>
    </div>
</div>


<!-- Tabla de docentes -->
<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th>Apellido Paterno</th>
            <th>Apellido Materno</th>
            <th>Nombres</th>
            <th>Email</th>
            <th>Estatus</th>
            <th>Envio correo</th>
            <th>Acciones</th>
            <th>VER COMO</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var docente in Model)
        {
            <tr data-status="active">
                <td>@docente.ApellidoPaterno</td>
                <td>@docente.ApellidoMaterno</td>
                <td>@docente.Nombre</td>
                <td>@docente.Email</td>
                <td>
                    @switch (docente.Autorizado)
                    {
                        case "Autorizado":
                            <span class="badge bg-success">Autorizado</span>
                            break;

                        case "Denegado":
                            <span class="badge bg-danger">Denegado</span>
                            break;

                        case "Pendiente":
                            <span class="badge bg-warning">Pendiente</span>
                            break;
                    }
                </td>
                <td>
                    @switch (docente.EnvioCorreo)
                    {
                        case "Enviado":
                            <span class="badge bg-success">Enviado</span>
                            break;

                        case "Sin enviar":
                            <span class="badge bg-warning">Sin enviar</span>
                            break;
                    }
                </td>
                <td>
                    <button class="btn btn-secondary btn-administrar"
                            data-bs-toggle="modal"
                            data-bs-target="#modalValidacion"
                            data-docente-id="@docente.DocenteId"
                            data-docente-enviocorreo="@docente.EnvioCorreo"
                            data-docente-apellidopaterno="@docente.ApellidoPaterno"
                            data-docente-apellidomaterno="@docente.ApellidoMaterno"
                            data-docente-nombres="@docente.Nombre"
                            data-docente-email="@docente.Email"
                            data-docente-estatus="@docente.Autorizado">
                        Administrar
                    </button>
                </td>
                <td>
                    @using (Html.BeginForm("IngresarComoDocente", "Administrador", FormMethod.Post))
                    {
                        @Html.Hidden("userId", docente.UserId)

                        <button type="submit" class="btn-ver">
                            <img src="~/Content/Iconos/ojo-azul.svg" alt="Ingresar como docente" width="20">
                        </button>
                    }
                </td>
            </tr>
        }
    </tbody>
</table>

@section Scripts{
    @Scripts.Render("~/bundles/jqueryval")
    <script src="~/Scripts/Administrador/Autorizar.js"></script>
}

@section Styles{
    @Styles.Render("~/Content/Alumno/css")
} 